{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Client Account Opening</title>
        <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    </head>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <body x-data="main" class="font-inter text-base antialiased font-medium relative vertical" :class="[ $store.app.sidebar ? 'toggle-sidebar' : '', $store.app.fullscreen ? 'full' : '',$store.app.mode]">
        <div class="bg-white dark:bg-dark text-dark dark:text-white bg-[url('../images/autho-light-bg.png')] dark:bg-[url('../images/autho-dark-bg.png')] bg-fixed bg-cover bg-center min-h-screen">
            <div class="relative">
                <div class="md:p-10 p-6 flex items-center justify-center sm:justify-between w-full flex-wrap gap-5">
                    <a href="{% url 'client_dashboard' %}" class="main-logo">
                        <img src="{% static 'assets/images/Investou-169x44.png' %}" class="dark-logo h-8 logo dark:hidden" alt="logo"/>
                        <img src="{% static 'assets/images/Investou-169x44.png' %}" class="light-logo h-8 logo hidden dark:block" alt="logo"/>
                    </a>
                    <div class="flex items-center gap-5">
                        <div class="text-lightgray hover:text-primary duration-300 md:block hidden">
                            <a href="javascript:;" x-show="$store.app.mode === 'light'" @click="$store.app.toggleMode('dark')" style="display: none;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M22 11.9999C22 17.5228 17.5228 21.9999 12 21.9999C10.8358 21.9999 9.71801 21.801 8.67887 21.4352C8.24138 20.3767 8 19.2165 8 17.9999C8 15.7787 8.80467 13.7454 10.1384 12.1757C11.31 13.8813 13.2744 14.9999 15.5 14.9999C17.8615 14.9999 19.9289 13.7405 21.0672 11.8568C21.3065 11.4607 22 11.5372 22 11.9999Z" fill="currentColor"/>
                                    <path d="M2 12C2 16.3586 4.78852 20.0659 8.67887 21.4353C8.24138 20.3768 8 19.2166 8 18C8 15.7788 8.80467 13.7455 10.1384 12.1758C9.42027 11.1303 9 9.86422 9 8.5C9 6.13845 10.2594 4.07105 12.1432 2.93276C12.5392 2.69347 12.4627 2 12 2C6.47715 2 2 6.47715 2 12Z" fill="currentColor"/>
                                </svg>
                            </a>
                            <a href="javascript:;" x-show="$store.app.mode === 'dark'" @click="$store.app.toggleMode('light')">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12Z" fill="currentColor"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C12.4142 1.25 12.75 1.58579 12.75 2V3C12.75 3.41421 12.4142 3.75 12 3.75C11.5858 3.75 11.25 3.41421 11.25 3V2C11.25 1.58579 11.5858 1.25 12 1.25ZM1.25 12C1.25 11.5858 1.58579 11.25 2 11.25H3C3.41421 11.25 3.75 11.5858 3.75 12C3.75 12.4142 3.41421 12.75 3 12.75H2C1.58579 12.75 1.25 12.4142 1.25 12ZM20.25 12C20.25 11.5858 20.5858 11.25 21 11.25H22C22.4142 11.25 22.75 11.5858 22.75 12C22.75 12.4142 22.4142 12.75 22 12.75H21C20.5858 12.75 20.25 12.4142 20.25 12ZM12 20.25C12.4142 20.25 12.75 20.5858 12.75 21V22C12.75 22.4142 12.4142 22.75 12 22.75C11.5858 22.75 11.25 22.4142 11.25 22V21C11.25 20.5858 11.5858 20.25 12 20.25Z" fill="currentColor"/>
                                    <g opacity="0.3">
                                        <path d="M4.39838 4.39838C4.69127 4.10549 5.16615 4.10549 5.45904 4.39838L5.85188 4.79122C6.14477 5.08411 6.14477 5.55898 5.85188 5.85188C5.55898 6.14477 5.08411 6.14477 4.79122 5.85188L4.39838 5.45904C4.10549 5.16615 4.10549 4.69127 4.39838 4.39838Z" fill="currentColor"/>
                                        <path d="M19.6009 4.39864C19.8938 4.69153 19.8938 5.16641 19.6009 5.4593L19.2081 5.85214C18.9152 6.14503 18.4403 6.14503 18.1474 5.85214C17.8545 5.55924 17.8545 5.08437 18.1474 4.79148L18.5402 4.39864C18.8331 4.10575 19.308 4.10575 19.6009 4.39864Z" fill="currentColor"/>
                                        <path d="M18.1474 18.1474C18.4403 17.8545 18.9152 17.8545 19.2081 18.1474L19.6009 18.5402C19.8938 18.8331 19.8938 19.308 19.6009 19.6009C19.308 19.8938 18.8331 19.8938 18.5402 19.6009L18.1474 19.2081C17.8545 18.9152 17.8545 18.4403 18.1474 18.1474Z" fill="currentColor"/>
                                        <path d="M5.85188 18.1477C6.14477 18.4406 6.14477 18.9154 5.85188 19.2083L5.45904 19.6012C5.16615 19.8941 4.69127 19.8941 4.39838 19.6012C4.10549 19.3083 4.10549 18.8334 4.39838 18.5405L4.79122 18.1477C5.08411 17.8548 5.55898 17.8548 5.85188 18.1477Z" fill="currentColor"/>
                                    </g>
                                </svg>
                            </a>
                        </div>
                        
                    </div>
                </div>
                <!-- ===========MESSAGES============= -->
                {% if messages %}
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        {% for message in messages %}
                        {% if message.tags == 'error' %}
                            Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: '{{ message }}'
                            });
                        {% elif message.tags == 'success' %}
                            Swal.fire({
                            icon: 'success',
                            title: 'Success',
                            text: '{{ message }}'
                            });
                        {% endif %}
                        {% endfor %}
                    });
                </script>
                {% endif %}
                <a href="{% url 'select_broker' %}" style="text-align: right;">Connect with Broker</a>
                <div class="min-h-[calc(100vh-192px)] relative overflow-y-auto overflow-x-hidden p-5 sm:p-7 space-y-5">
                    <div class="sm:p-[60px] p-9 border-2 border-gray/10 dark:border-gray/20 bg-white/10 dark:bg-white/[0.02] backdrop-blur-3xl max-w-5xl mx-auto rounded-xl w-full">
                        <p class="text-3xl font-semibold">Create Account!</p>
                        <form method="post" enctype="multipart/form-data" class="mt-[60px] space-y-5">
                            {% csrf_token %}
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                                <div class="relative">
                                    <input type="text" name="client_full_name" value="{{client_account.client_full_name}}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Full Name" >
                                </div>
                                <div class="relative">
                                    <label for="file-upload" name="client_profile_image" class="cursor-pointer">
                                        <input id="file-upload" type="file" class="hidden">
                                        <div class="form-input h-16 bg-transparent dark:bg-transparent text-base rounded-lg shadow-md px-4 py-2 flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                            </svg>
                                            <span>Upload Profile Image</span>
                                        </div>
                                    </label>
                                </div>
                                <div class="relative">
                                    <h2 class="text-base font-semibold mb-4">Date Of Birth</h2>
                                    <input type="date" name="client_date_of_birth" value="{{ client_account.client_date_of_birth }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Full Name">
                                </div>       
                                <div class="relative">
                                    <h2 class="text-base font-semibold mb-4">Select Gender</h2>
                                    <form>
                                        <select name="client_gender" class="form-select h-16 bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14">
                                            <option value="male" {% if client_account.client_gender == 'male' %}selected{% endif %}>Male</option>
                                            <option value="female" {% if client_account.client_gender == 'female' %}selected{% endif %}>Female</option>
                                        </select>
                                    </form>
                                </div>
                                
                                <div class="relative">
                                    <input type="tel" name="client_phone" value="{{ client_account.client_phone }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="91+ 000 00 000 00" required="">
                                </div>
                                <div class="relative">
                                    <input type="email" name="client_email" value="{{ client_account.client_email }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Email" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_address" value="{{ client_account.client_address }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Communication Address" required="">
                                </div>
                                <div class="relative">
                                    <input type="number" name="client_pincode" value="{{ client_account.client_pincode }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Pincode" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_district" value="{{ client_account.client_district }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="District" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_state" value="{{ client_account.client_state }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="State" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_occupation" value="{{ client_account.client_occupation }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Occupation" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_parent_name" value="{{ client_account.client_parent_name }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Father/Mother" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_nominee_name" value="{{ client_account.client_nominee_name }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Nominee Name" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" name="client_nominee_relationship" value="{{ client_account.client_nominee_relationship }}" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="Relationship with nominee" required="">
                                </div>
                                <div class="relative">
                                    <input type="text" class="form-input h-16  bg-transparent dark:bg-transparent text-base rounded-[10px] ps-5 pe-14" placeholder="API" >
                                </div>
                                
                                <div class="relative">
                                    <button type="submit" onclick="validateForm()" class="text-center btn bg-primary py-6 uppercase tracking-widest font-bold text-sm rounded-[10px] text-white w-full hover:bg-info/90 duration-300">Create account</button>
                                </div>
                            </div>
                        
                        </form>
                        <!-- ===========rEQUERED MESSAGES============= -->
                        <script>
                            function validateForm() {
                                var full_name = document.getElementsByName('full_name')[0].value;
                                var date_of_birth = document.getElementsByName('date_of_birth')[0].value;
                                var gender = document.getElementsByName('gender')[0].value;
                                var phone = document.getElementsByName('phone')[0].value;
                                var email = document.getElementsByName('email')[0].value;
                                var address = document.getElementsByName('address')[0].value;
                                var pincode = document.getElementsByName('pincode')[0].value;
                                var district = document.getElementsByName('district')[0].value;
                                var state = document.getElementsByName('state')[0].value;
                                var occupation = document.getElementsByName('occupation')[0].value;
                                var parent_name = document.getElementsByName('parent_name')[0].value;
                                var nominee_name = document.getElementsByName('nominee_name')[0].value;
                                var nominee_relationship = document.getElementsByName('nominee_relationship')[0].value;
                        
                                if (!full_name) {
                                    displayError('Full Name is required.');
                                    return;
                                }
                                if (!date_of_birth) {
                                    displayError('Date of Birth is required.');
                                    return;
                                }
                                if (!gender) {
                                    displayError('Gender is required.');
                                    return;
                                }
                                if (!phone) {
                                    displayError('Phone is required.');
                                    return;
                                } else {
                                    var phoneRegex = /^[0-9]+$/;
                                    if (!phoneRegex.test(phone)) {
                                        displayError('Invalid phone number.');
                                        return;
                                    }
                                }
                                if (!email) {
                                    displayError('Email is required.');
                                    return;
                                } else {
                                    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                                    if (!emailRegex.test(email)) {
                                        displayError('Invalid email format.');
                                        return;
                                    }
                                }
                                if (!nominee_relationship) {
                                    displayError('Nominee Relationship is required.');
                                    return;
                                }
                                document.forms[0].submit();
                            }
                        
                            function displayError(message) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Validation Error',
                                    text: message,
                                    confirmButtonColor: '#3085d6',
                                    confirmButtonText: 'OK'
                                });
                            }
                        </script>
                    </div>
                </div>
                <footer class="py-7 px-3 text-center">
                    <p class="font-semibold">
                        &copy;<script>
                            var year = new Date();
                            document.write(year.getFullYear());
                        </script>
                        INVESTOU
                    </p>
                </footer>
            </div>
        </div>
    <script src="{% static 'assets/js/alpine-collaspe.min.js' %}"></script>
    <script src="{% static 'assets/js/alpine-persist.min.js' %}"></script>
    <script src="{% static 'assets/js/alpine.min.js' %}" defer></script>
    <script src="{% static 'assets/js/custom.js' %}"></script>
    </body>
</html>
